<!DOCTYPE html>
<html lang="ja">

<!--// HEAD //////////////////////////////////////////////////////////-->
<head>
	<meta charset="UTF-8">
	<title>googleMapsAPI</title>
	<style>
	<!--
	#map_canvas{
	  max-width: 600px;
	  max-height: 600px;
	  min-width: 400px;
	  min-height: 400px;
	}
	-->
	</style>
</head>

<!--// BODY //////////////////////////////////////////////////////////-->
<body>
	<div class="mod-canvas">
	    <div id="map_canvas"></div>
	</div>
	<!-- <span class="js-address">東京駅</span> -->
	<input class="js-address" type="text" />
	<input id="Button1" type="button" value="button" />

<!--// SCRIPT ////////////////////////////////////////////////////////-->
<!-- jQuery -->
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
<!-- Google map Script -->
<script src="http://maps.googleapis.com/maps/api/js?sensor=true"></script>
<!-- map script -->
<script>
<!--
// 初期値
var address01 = "東京駅";
$(document).ready(function () {
	$("#Button1").click(function () {
		address01 = $(".js-address").val();
		initialize() 
	}) 
});

var mapCanvas = document.getElementById('map_canvas');
var zoom_level = 15;
var markers = new Array();

function initialize() {
	var geocoder = new google.maps.Geocoder();
	geocoder.geocode({
			'address' : address01
		},
		function (result, status) {
			if (status == google.maps.GeocoderStatus.OK) {
				var latlng = result[0].geometry.location;
				console.log(latlng);
				var myOptions = {
				    zoom : 15, // ズームレベル
				    center : latlng, // 取得した緯度経度を中心に
				    mapTypeId : google.maps.MapTypeId.ROADMAP 
				};
				var map = new google.maps.Map(mapCanvas, myOptions);
				var marker = new google.maps.Marker({
				    position : latlng,
				    map : map 
				});
				
				google.maps.event.addListener(map, 'bounds_changed', function () {
					var latlngBounds = map.getBounds();
					var swLatlng = latlngBounds.getSouthWest();
					var swlat = swLatlng.lat();
					var swlng = swLatlng.lng();
					var neLatlng = latlngBounds.getNorthEast();
					var nelat = neLatlng.lat();
					var nelng = neLatlng.lng();
				});
				
				google.maps.event.addListener(map, 'zoom_changed', function () {
					zoom_level = map.getZoom();
					if (zoom_level >= 0) {
						var data = new Array();
						data.push({ lat : '35.681382', lng : '139.766084', name : '東京駅' });
						data.push({ lat : '35.688687', lng : '139.77323', name : '大手町駅' });
						data.push({ lat : '35.68255', lng : '139.76437299999998', name : '丸のうちビルディング' });
						if (zoom_level != 15) {
							for (i = 0; i < data.length; i++) {
								markers[i] = new google.maps.Marker({
									position : new google.maps.LatLng (data[i].lat, data[i].lng),
									map : map, 
									icon : new google.maps.MarkerImage('images/france.png' , new google.maps.Size(31, 31), new google.maps.Point(0, 0)) 
							    });
							}
						} else {
							markers.forEach(function (mkr, idx) {
								mkr.setMap(map);
							});
							markers[0] = new google.maps.Marker({
								position : new google.maps.LatLng(data[0].lat, data[0].lng),
								map : map,
								icon : new google.maps.MarkerImage('images/france1.png', 
								new google.maps.Size(62, 62),
								new google.maps.Point(0, 0)) 
							});
						}
					} else {
						markers.forEach(function (mkr, idx) {
							mkr.setMap(map);
						});
					}
				});
			}
			else {
			    alert('取得できませんでした…');
			}
		});
}

google.maps.event.addDomListener(window, 'load', initialize);
-->
</script>

<!--//////////////////////////////////////////////////////////////////-->
</body>
</html>